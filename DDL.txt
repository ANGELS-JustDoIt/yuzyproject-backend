CREATE TABLE members (
  user_idx    BIGINT NOT NULL AUTO_INCREMENT,
  email      VARCHAR(255) NOT NULL,
  password   VARCHAR(255) NOT NULL,
  user_name  VARCHAR(100) NOT NULL,
  hope_job   VARCHAR(100),
  created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (user_idx),
  UNIQUE KEY uk_members_email (email)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE posts (
  board_id       BIGINT NOT NULL AUTO_INCREMENT,
  title          VARCHAR(255) NOT NULL,
  type           VARCHAR(50) NOT NULL,
  content        TEXT NOT NULL,
  board_id_ref   BIGINT NULL,                 -- (optional) if you meant category/board group; remove if not needed
  created_at     DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at     DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  main_image_id  BIGINT NULL,
  user_idx        BIGINT NOT NULL,
  views          INT NOT NULL DEFAULT 0,
  is_solved      TINYINT NOT NULL DEFAULT 0,
  PRIMARY KEY (board_id),
  KEY idx_posts_user_idx (user_idx),
  KEY idx_posts_type (type),
  KEY idx_posts_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE file (
  file_key    BIGINT NOT NULL AUTO_INCREMENT,
  board_type  VARCHAR(50) NOT NULL,
  board_id    BIGINT NOT NULL,
  file_path   VARCHAR(500) NOT NULL,
  file_name   VARCHAR(255) NOT NULL,
  seq         INT NOT NULL DEFAULT 0,
  created_at  DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at  DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  user_idx     BIGINT NOT NULL,
  PRIMARY KEY (file_key),
  KEY idx_file_board (board_type, board_id),
  KEY idx_file_user_idx (user_idx)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE comments (
  reply_id     BIGINT NOT NULL AUTO_INCREMENT,
  board_id     BIGINT NOT NULL,
  seq          INT NOT NULL DEFAULT 0,
  created_at   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  user_idx      BIGINT NOT NULL,
  is_selected  TINYINT NOT NULL DEFAULT 0,
  PRIMARY KEY (reply_id),
  KEY idx_comments_board_id (board_id),
  KEY idx_comments_user_idx (user_idx)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE likes (
  like_id     BIGINT NOT NULL AUTO_INCREMENT,
  board_type  VARCHAR(50) NOT NULL,
  board_id    BIGINT NOT NULL,
  user_idx     BIGINT NOT NULL,
  created_at  DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (like_id),
  UNIQUE KEY uk_likes (board_type, board_id, user_idx),
  KEY idx_likes_user_idx (user_idx)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE keyword (
  keyword_id  BIGINT NOT NULL AUTO_INCREMENT,
  board_id    BIGINT NOT NULL,
  keyword     VARCHAR(50) NOT NULL,
  PRIMARY KEY (keyword_id),
  KEY idx_keyword_board_id (board_id),
  KEY idx_keyword_keyword (keyword)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE grass (
  grass_id    BIGINT NOT NULL AUTO_INCREMENT,
  grass_date  DATE NOT NULL,
  user_idx     BIGINT NOT NULL,
  is_login    TINYINT NOT NULL DEFAULT 0,
  is_code     TINYINT NOT NULL DEFAULT 0,
  is_board    TINYINT NOT NULL DEFAULT 0,
  is_reply    TINYINT NOT NULL DEFAULT 0,
  PRIMARY KEY (grass_id),
  UNIQUE KEY uk_grass (grass_date, user_idx),
  KEY idx_grass_user_idx (user_idx)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE study_archive (
  archive_id     BIGINT NOT NULL AUTO_INCREMENT,
  user_idx        BIGINT NOT NULL,
  analysis_text  TEXT,
  raw_response   TEXT,
  created_at     DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (archive_id),
  KEY idx_study_archive_user_idx (user_idx),
  KEY idx_study_archive_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE study_archive_img (
  archive_image_id  BIGINT NOT NULL AUTO_INCREMENT,
  archive_id        BIGINT NOT NULL,
  image_url         VARCHAR(500) NOT NULL,
  created_at        DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (archive_image_id),
  KEY idx_archive_img_archive_id (archive_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE scrap (
  scrap_id    BIGINT NOT NULL AUTO_INCREMENT,
  board_id    BIGINT NOT NULL,
  user_idx     BIGINT NOT NULL,
  created_at  DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (scrap_id),
  UNIQUE KEY uk_scrap (board_id, user_idx),
  KEY idx_scrap_user_idx (user_idx)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE noti (
  noti_id      BIGINT NOT NULL AUTO_INCREMENT,
  noti_type    VARCHAR(50) NOT NULL,
  noti_val     VARCHAR(100),
  noti_content VARCHAR(500),
  read_yn      TINYINT NOT NULL DEFAULT 0,
  user_idx      BIGINT NOT NULL,
  created_at   DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (noti_id),
  KEY idx_noti_user_idx (user_idx),
  KEY idx_noti_read_yn (read_yn),
  KEY idx_noti_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE schedule (
  schedule_id   BIGINT NOT NULL AUTO_INCREMENT,
  user_idx      BIGINT NOT NULL,
  title         VARCHAR(255) NOT NULL,
  description   TEXT,
  schedule_date DATE NOT NULL,
  created_at    DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at    DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (schedule_id),
  KEY idx_schedule_user_idx (user_idx),
  KEY idx_schedule_date (schedule_date),
  KEY idx_schedule_user_date (user_idx, schedule_date)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
